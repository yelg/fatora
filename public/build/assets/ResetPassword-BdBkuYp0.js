import{v as V,I as q,e as v,j as h,i as S,c as M,a as t,w as d,l as a,m as k,r as p,N as E,n as P,f as u,a2 as R,J as x,g as $,h as A,o as C,p as G,q as L,t as N}from"./main-DnObvGgc.js";import{u as U}from"./global-CGJZ3VSg.js";import{u as j}from"./auth-C46PzZ_n.js";const z={__name:"ResetPassword",setup(D){const c=E(),g=P(),_=j(),{t:i}=V.useI18n(),o=q({email:"",password:"",password_confirmation:""});U();let n=v(!1),f=v(!1);const I=h(()=>({email:{required:u.withMessage(i("validation.required"),$),email:u.withMessage(i("validation.email_incorrect"),A)},password:{required:u.withMessage(i("validation.required"),$),minLength:u.withMessage(i("validation.password_min_length",{count:8}),x(8))},password_confirmation:{sameAsPassword:u.withMessage(i("validation.password_incorrect"),R(o.password))}})),s=S(I,o);async function b(l){if(s.value.$touch(),!s.value.$invalid){let e={email:o.email,password:o.password,password_confirmation:o.password_confirmation,token:c.params.token};f.value=!0;let m=_.resetPassword(e,c.params.company);f.value=!1,m.data&&g.push({name:"customer.login"})}}return(l,e)=>{const m=p("BaseInput"),w=p("BaseInputGroup"),y=p("BaseIcon"),B=p("BaseButton");return C(),M("form",{id:"loginForm",onSubmit:k(b,["prevent"])},[t(w,{error:a(s).email.$error&&a(s).email.$errors[0].$message,label:l.$t("login.email"),class:"mb-4",required:""},{default:d(()=>[t(m,{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=r=>o.email=r),type:"email",name:"email",invalid:a(s).email.$error,onInput:e[1]||(e[1]=r=>a(s).email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["error","label"]),t(w,{error:a(s).password.$error&&a(s).password.$errors[0].$message,label:l.$t("login.password"),class:"mb-4",required:""},{default:d(()=>[t(m,{modelValue:o.password,"onUpdate:modelValue":e[3]||(e[3]=r=>o.password=r),type:a(n)?"text":"password",name:"password",invalid:a(s).password.$error,onInput:e[4]||(e[4]=r=>a(s).password.$touch())},{right:d(()=>[t(y,{name:a(n)?"EyeIcon":"EyeSlashIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:e[2]||(e[2]=r=>G(n)?n.value=!a(n):n=!a(n))},null,8,["name"])]),_:1},8,["modelValue","type","invalid"])]),_:1},8,["error","label"]),t(w,{error:a(s).password_confirmation.$error&&a(s).password_confirmation.$errors[0].$message,label:l.$t("login.retype_password"),class:"mb-4",required:""},{default:d(()=>[t(m,{modelValue:o.password_confirmation,"onUpdate:modelValue":e[5]||(e[5]=r=>o.password_confirmation=r),type:"password",name:"password",invalid:a(s).password_confirmation.$error,onInput:e[6]||(e[6]=r=>a(s).password_confirmation.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["error","label"]),t(B,{type:"submit",variant:"primary"},{default:d(()=>[L(N(l.$t("login.reset_password")),1)]),_:1})],32)}}};export{z as default};
