import{v as R,e as p,j as C,i as A,c as D,a as n,w as l,m as L,r as v,N as G,f as g,a2 as P,J as h,h as j,g as y,o as S,b as F,t as I,p as b,l as e,q as z,K as J,L as K,M as O}from"./main-DnObvGgc.js";import{a as T,u as H}from"./global-CGJZ3VSg.js";import"./auth-C46PzZ_n.js";const Q={class:"font-bold text-left"},W={class:"mt-2 text-sm leading-snug text-left text-gray-500",style:{"max-width":"680px"}},X={class:"grid gap-6 sm:grid-col-1 md:grid-cols-2 mt-6"},re={__name:"CustomerSettings",setup(Y){const r=T();H(),G();const{t:m,tm:q}=R.useI18n();let c=p([]),d=p(!1),f=p(null),u=p(!1),i=p(!1);const V=p(!1);r.userForm.avatar&&c.value.push({image:r.userForm.avatar});const U=C(()=>({userForm:{name:{required:g.withMessage(m("validation.required"),y),minLength:g.withMessage(m("validation.name_min_length",{count:3}),h(3))},email:{required:g.withMessage(m("validation.required"),y),email:g.withMessage(m("validation.email_incorrect"),j)},password:{minLength:g.withMessage(m("validation.password_min_length",{count:8}),h(8))},confirm_password:{sameAsPassword:g.withMessage(m("validation.password_incorrect"),P(r.userForm.password))}}})),a=A(U,C(()=>r));function M(t,s){f.value=s}function x(){f.value=null,V.value=!0}function k(){if(a.value.userForm.$touch(),a.value.userForm.$invalid)return!0;d.value=!0;let t=new FormData;t.append("name",r.userForm.name),t.append("email",r.userForm.email),r.userForm.password!=null&&r.userForm.password!==void 0&&r.userForm.password!==""&&t.append("password",r.userForm.password),f.value&&t.append("customer_avatar",f.value),t.append("is_customer_avatar_removed",V.value),r.updateCurrentUser({data:t,message:q("settings.account_settings.updated_message")}).then(s=>{s.data.data&&(d.value=!1,r.$patch($=>{$.userForm.password="",$.userForm.confirm_password=""}),f.value=null,V.value=!1)}).catch(s=>{d.value=!1})}return(t,s)=>{const $=v("BaseFileUploader"),w=v("BaseInputGroup"),_=v("BaseInput"),B=v("BaseIcon"),E=v("BaseButton"),N=v("BaseCard");return S(),D("form",{class:"relative h-full mt-4",onSubmit:L(k,["prevent"])},[n(N,null,{default:l(()=>[F("div",null,[F("h6",Q,I(t.$t("settings.account_settings.account_settings")),1),F("p",W,I(t.$t("settings.account_settings.section_description")),1)]),F("div",X,[n(w,{label:t.$t("settings.account_settings.profile_picture")},{default:l(()=>[n($,{modelValue:e(c),"onUpdate:modelValue":s[0]||(s[0]=o=>b(c)?c.value=o:c=o),avatar:!0,accept:"image/*",onChange:M,onRemove:x},null,8,["modelValue"])]),_:1},8,["label"]),s[11]||(s[11]=F("span",null,null,-1)),n(w,{label:t.$t("settings.account_settings.name"),error:e(a).userForm.name.$error&&e(a).userForm.name.$errors[0].$message,required:""},{default:l(()=>[n(_,{modelValue:e(r).userForm.name,"onUpdate:modelValue":s[1]||(s[1]=o=>e(r).userForm.name=o),invalid:e(a).userForm.name.$error,onInput:s[2]||(s[2]=o=>e(a).userForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),n(w,{label:t.$t("settings.account_settings.email"),error:e(a).userForm.email.$error&&e(a).userForm.email.$errors[0].$message,required:""},{default:l(()=>[n(_,{modelValue:e(r).userForm.email,"onUpdate:modelValue":s[3]||(s[3]=o=>e(r).userForm.email=o),invalid:e(a).userForm.email.$error,onInput:s[4]||(s[4]=o=>e(a).userForm.email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),n(w,{error:e(a).userForm.password.$error&&e(a).userForm.password.$errors[0].$message,label:t.$t("settings.account_settings.password")},{default:l(()=>[n(_,{modelValue:e(r).userForm.password,"onUpdate:modelValue":s[6]||(s[6]=o=>e(r).userForm.password=o),type:e(u)?"text":"password",invalid:e(a).userForm.password.$error,onInput:s[7]||(s[7]=o=>e(a).userForm.password.$touch())},{right:l(()=>[n(B,{name:e(u)?"EyeIcon":"EyeSlashIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:s[5]||(s[5]=o=>b(u)?u.value=!e(u):u=!e(u))},null,8,["name"])]),_:1},8,["modelValue","type","invalid"])]),_:1},8,["error","label"]),n(w,{label:t.$t("settings.account_settings.confirm_password"),error:e(a).userForm.confirm_password.$error&&e(a).userForm.confirm_password.$errors[0].$message},{default:l(()=>[n(_,{modelValue:e(r).userForm.confirm_password,"onUpdate:modelValue":s[9]||(s[9]=o=>e(r).userForm.confirm_password=o),type:e(i)?"text":"password",invalid:e(a).userForm.confirm_password.$error,onInput:s[10]||(s[10]=o=>e(a).userForm.confirm_password.$touch())},{right:l(()=>[n(B,{name:e(i)?"EyeIcon":"EyeSlashIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:s[8]||(s[8]=o=>b(i)?i.value=!e(i):i=!e(i))},null,8,["name"])]),_:1},8,["modelValue","type","invalid"])]),_:1},8,["label","error"])]),n(E,{loading:e(d),disabled:e(d),class:"mt-6"},{left:l(o=>[e(d)?K("",!0):(S(),J(B,{key:0,name:"ArrowDownOnSquareIcon",class:O(o.class)},null,8,["class"]))]),default:l(()=>[z(" "+I(t.$t("general.save")),1)]),_:1},8,["loading","disabled"])]),_:1})],32)}}};export{re as default};
