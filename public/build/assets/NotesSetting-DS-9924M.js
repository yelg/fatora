import{a9 as M,u as A,v as x,aB as C,N as $,O as D,G as E,a7 as T,r as u,K as d,o as r,w as t,L as B,l as p,V as k,a as c,q as g,t as _,e as O,j,c as P,Q as G,M as L,I as V}from"./main-DnObvGgc.js";import{_ as F}from"./NoteModal-Dr6YmiAY.js";import"./payment-COlo_rP3.js";const H={__name:"NoteIndexDropdown",props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:null}},setup(y){const a=y,v=M(),N=A(),{t:n}=x.useI18n(),i=C(),w=$(),h=D(),b=E();T("utils");function z(e){i.fetchNote(e),b.openModal({title:n("settings.customization.notes.edit_note"),componentName:"NoteModal",size:"md",refreshData:a.loadData})}function S(e){v.openDialog({title:n("general.are_you_sure"),message:n("settings.customization.notes.note_confirm_delete"),yesLabel:n("general.yes"),noLabel:n("general.no"),variant:"danger",hideNoButton:!1,size:"lg"}).then(async()=>{(await i.deleteNote(e)).data.success?N.showNotification({type:"success",message:n("settings.customization.notes.deleted_message")}):N.showNotification({type:"error",message:n("settings.customization.notes.already_in_use")}),a.loadData&&a.loadData()})}return(e,m)=>{const o=u("BaseIcon"),f=u("BaseButton"),l=u("BaseDropdownItem"),I=u("BaseDropdown");return r(),d(I,null,{activator:t(()=>[p(w).name==="notes.view"?(r(),d(f,{key:0,variant:"primary"},{default:t(()=>[c(o,{name:"EllipsisHorizontalIcon",class:"h-5 text-white"})]),_:1})):(r(),d(o,{key:1,name:"EllipsisHorizontalIcon",class:"h-5 text-gray-500"}))]),default:t(()=>[p(h).hasAbilities(p(k).MANAGE_NOTE)?(r(),d(l,{key:0,onClick:m[0]||(m[0]=s=>z(y.row.id))},{default:t(()=>[c(o,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),g(" "+_(e.$t("general.edit")),1)]),_:1})):B("",!0),p(h).hasAbilities(p(k).MANAGE_NOTE)?(r(),d(l,{key:1,onClick:m[1]||(m[1]=s=>S(y.row.id))},{default:t(()=>[c(o,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),g(" "+_(e.$t("general.delete")),1)]),_:1})):B("",!0)]),_:1})}}},R={__name:"NotesSetting",setup(y){const{t:a}=x.useI18n(),v=E(),N=C(),n=D(),i=O(""),w=j(()=>[{key:"name",label:a("settings.customization.notes.name"),thClass:"extra",tdClass:"font-medium text-gray-900 flex gap-1 items-center"},{key:"type",label:a("settings.customization.notes.type"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"actions",label:"",tdClass:"text-right text-sm font-medium",sortable:!1}]);async function h({page:e,filter:m,sort:o}){let f=V({orderByField:o.fieldName||"created_at",orderBy:o.order||"desc",page:e}),l=await N.fetchNotes(f);return{data:l.data.data,pagination:{totalPages:l.data.meta.last_page,currentPage:e,totalCount:l.data.meta.total,limit:5}}}async function b(){await v.openModal({title:a("settings.customization.notes.add_note"),componentName:"NoteModal",size:"md",refreshData:i.value&&i.value.refresh})}async function z(){i.value&&i.value.refresh()}function S(e){switch(e){case"Estimate":return a("settings.customization.notes.types.estimate");case"Invoice":return a("settings.customization.notes.types.invoice");case"Payment":return a("settings.customization.notes.types.payment");default:return e}}return(e,m)=>{const o=u("BaseIcon"),f=u("BaseButton"),l=u("BaseTable"),I=u("BaseSettingCard");return r(),P(G,null,[c(F),c(I,{title:e.$t("settings.customization.notes.title"),description:e.$t("settings.customization.notes.description")},{action:t(()=>[p(n).hasAbilities(p(k).MANAGE_NOTE)?(r(),d(f,{key:0,variant:"primary-outline",onClick:b},{left:t(s=>[c(o,{class:L(s.class),name:"PlusIcon"},null,8,["class"])]),default:t(()=>[g(" "+_(e.$t("settings.customization.notes.add_note")),1)]),_:1})):B("",!0)]),default:t(()=>[c(l,{ref_key:"table",ref:i,data:h,columns:w.value,class:"mt-14"},{"cell-actions":t(({row:s})=>[c(H,{row:s.data,table:i.value,"load-data":z},null,8,["row","table"])]),"cell-name":t(({row:s})=>[g(_(s.data.name)+" ",1),s.data.is_default?(r(),d(o,{key:0,name:"StarIcon",class:"w-3 h-3 text-primary-400"})):B("",!0)]),"cell-type":t(({row:s})=>[g(_(S(s.data.type)),1)]),_:1},8,["columns"])]),_:1},8,["title","description"])],64)}}};export{R as default};
