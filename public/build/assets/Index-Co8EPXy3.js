import{v as J,e as v,I as Q,j as h,ab as Y,K as f,w as a,r as o,a7 as Z,N as ee,o as b,a as e,ae as k,L as te,l as d,q as B,t as y,M as F,af as V,b as P}from"./main-DnObvGgc.js";import{u as ae}from"./invoice-CRWuDdLr.js";import oe from"./BaseTable-buesRsa8.js";import{u as le}from"./global-CGJZ3VSg.js";import{_ as se}from"./MoonwalkerIcon-CxVLOJGD.js";import"./auth-C46PzZ_n.js";const ne={class:"relative table-container"},pe={__name:"Index",setup(re){const{t:r}=J.useI18n();Z("utils"),ee();const $=v(null);let g=v(!0),i=v(!1);const N=v([{label:r("general.draft"),value:"DRAFT"},{label:r("general.due"),value:"DUE"},{label:r("general.sent"),value:"SENT"},{label:r("invoices.viewed"),value:"VIEWED"},{label:r("invoices.completed"),value:"COMPLETED"}]),l=Q({status:"",from_date:"",to_date:"",invoice_number:""}),m=ae(),I=le();h(()=>I.currency);const H=h(()=>[{key:"invoice_date",label:r("invoices.date"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"invoice_number",label:r("invoices.number")},{key:"status",label:r("invoices.status")},{key:"paid_status",label:r("invoices.paid_status")},{key:"due_amount",label:r("dashboard.recent_invoices_card.amount_due")},{key:"actions",thClass:"text-right",tdClass:"text-right text-sm font-medium",sortable:!1}]),S=h(()=>!m.totalInvoices&&!g.value);Y(l,()=>{T()},{debounce:500});function M(){$.value.refresh()}function T(){M()}function D(){l.status="",l.from_date="",l.to_date="",l.invoice_number=""}function U(){i.value&&D(),i.value=!i.value}async function L({page:s,sort:n}){let _={status:l.status.value,invoice_number:l.invoice_number,from_date:l.from_date,to_date:l.to_date,orderByField:n.fieldName||"created_at",orderBy:n.order||"desc",page:s};g.value=!0;let c=await m.fetchInvoices(_,I.companySlug);return g.value=!1,{data:c.data.data,pagination:{totalPages:c.data.meta.last_page,currentPage:s,totalCount:c.data.meta.total,limit:10}}}return(s,n)=>{const _=o("BaseBreadcrumbItem"),c=o("BaseBreadcrumb"),u=o("BaseIcon"),j=o("BaseButton"),z=o("BasePageHeader"),G=o("BaseSelectInput"),p=o("BaseInputGroup"),W=o("BaseInput"),w=o("BaseDatePicker"),R=o("BaseFilterWrapper"),q=o("BaseEmptyPlaceholder"),C=o("router-link"),A=o("BaseFormatMoney"),E=o("BaseInvoiceStatusLabel"),x=o("BaseInvoiceStatusBadge"),K=o("BaseDropdownItem"),O=o("BaseDropdown"),X=o("BasePage");return b(),f(X,null,{default:a(()=>[e(z,{title:s.$t("invoices.title")},{actions:a(()=>[k(e(j,{variant:"primary-outline",onClick:U},{right:a(t=>[d(i)?(b(),f(u,{key:1,name:"XMarkIcon",class:F(t.class)},null,8,["class"])):(b(),f(u,{key:0,name:"FunnelIcon",class:F(t.class)},null,8,["class"]))]),default:a(()=>[B(y(s.$t("general.filter"))+" ",1)]),_:1},512),[[V,d(m).totalInvoices]])]),default:a(()=>[e(c,null,{default:a(()=>[e(_,{title:s.$t("general.home"),to:`/${d(I).companySlug}/customer/dashboard`},null,8,["title","to"]),e(_,{title:s.$t("invoices.invoice",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),k(e(R,{onClear:D},{default:a(()=>[e(p,{label:s.$t("invoices.status"),class:"px-3"},{default:a(()=>[e(G,{modelValue:l.status,"onUpdate:modelValue":n[0]||(n[0]=t=>l.status=t),options:N.value,searchable:"","allow-empty":!1,placeholder:s.$t("general.select_a_status")},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"]),e(p,{label:s.$t("invoices.invoice_number"),color:"black-light",class:"px-3 mt-2"},{default:a(()=>[e(W,{modelValue:l.invoice_number,"onUpdate:modelValue":n[1]||(n[1]=t=>l.invoice_number=t)},{default:a(()=>[e(u,{name:"EllipsisHorizontalIcon",class:"h-5 text-gray-500"}),e(u,{name:"HashtagIcon",class:"h-5 ml-3 text-gray-600"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(p,{label:s.$t("general.from"),class:"px-3"},{default:a(()=>[e(w,{modelValue:l.from_date,"onUpdate:modelValue":n[2]||(n[2]=t=>l.from_date=t),"calendar-button":!0,"calendar-button-icon":"calendar"},null,8,["modelValue"])]),_:1},8,["label"]),n[4]||(n[4]=P("div",{class:"hidden w-8 h-0 mx-4 border border-gray-400 border-solid xl:block",style:{"margin-top":"1.5rem"}},null,-1)),e(p,{label:s.$t("general.to"),class:"px-3"},{default:a(()=>[e(w,{modelValue:l.to_date,"onUpdate:modelValue":n[3]||(n[3]=t=>l.to_date=t),"calendar-button":!0,"calendar-button-icon":"calendar"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},512),[[V,d(i)]]),S.value?(b(),f(q,{key:0,title:s.$t("invoices.no_invoices"),description:s.$t("invoices.list_of_invoices")},{default:a(()=>[e(se,{class:"mt-5 mb-4"})]),_:1},8,["title","description"])):te("",!0),k(P("div",ne,[e(oe,{ref_key:"table",ref:$,data:L,columns:H.value,"placeholder-count":d(m).totalInvoices>=20?10:5,class:"mt-10"},{"cell-invoice_date":a(({row:t})=>[B(y(t.data.formatted_invoice_date),1)]),"cell-invoice_number":a(({row:t})=>[e(C,{to:{path:`invoices/${t.data.id}/view`},class:"font-medium text-primary-500"},{default:a(()=>[B(y(t.data.invoice_number),1)]),_:2},1032,["to"])]),"cell-due_amount":a(({row:t})=>[e(A,{amount:t.data.total,currency:t.data.customer.currency},null,8,["amount","currency"])]),"cell-status":a(({row:t})=>[e(x,{status:t.data.status,class:"px-3 py-1"},{default:a(()=>[e(E,{status:t.data.status},null,8,["status"])]),_:2},1032,["status"])]),"cell-paid_status":a(({row:t})=>[e(x,{status:t.data.paid_status,class:"px-3 py-1"},{default:a(()=>[e(E,{status:t.data.paid_status},null,8,["status"])]),_:2},1032,["status"])]),"cell-actions":a(({row:t})=>[e(O,null,{activator:a(()=>[e(u,{name:"EllipsisHorizontalIcon",class:"h-5 text-gray-500"})]),default:a(()=>[e(C,{to:`invoices/${t.data.id}/view`},{default:a(()=>[e(K,null,{default:a(()=>[e(u,{name:"EyeIcon",class:"h-5 mr-3 text-gray-600"}),B(" "+y(s.$t("general.view")),1)]),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:1},8,["columns","placeholder-count"])],512),[[V,!S.value]])]),_:1})}}};export{pe as default};
