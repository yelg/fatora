import{G as k,v as q,e as D,j as g,f as y,ah as G,J as L,g as N,i as j,r as u,K as B,o as b,w as o,b as m,m as T,a as n,l as e,q as C,t as v,L as E,M as z}from"./main-DnObvGgc.js";import{u as A}from"./category-CzaztFkO.js";const U={class:"flex justify-between w-full"},J={class:"p-8 sm:p-6"},K={class:"z-0 flex justify-end p-4 border-t border-gray-200 border-solid border-modal-bg"},H={__name:"CategoryModal",setup(O){const t=A(),i=k(),{t:p}=q.useI18n();let c=D(!1);const h=g(()=>({currentCategory:{name:{required:y.withMessage(p("validation.required"),N),minLength:y.withMessage(p("validation.name_min_length",{count:3}),L(3))},description:{maxLength:y.withMessage(p("validation.description_maxlength",{count:255}),G(255))}}})),a=j(h,g(()=>t)),w=g(()=>i.active&&i.componentName==="CategoryModal");async function I(){if(a.value.currentCategory.$touch(),a.value.currentCategory.$invalid)return!0;const s=t.isEdit?t.updateCategory:t.addCategory;c.value=!0,await s(t.currentCategory),c.value=!1,i.refreshData&&i.refreshData(),d()}function d(){i.closeModal(),setTimeout(()=>{t.$reset(),a.value.$reset()},300)}return(s,r)=>{const f=u("BaseIcon"),M=u("BaseInput"),_=u("BaseInputGroup"),x=u("BaseTextarea"),V=u("BaseInputGrid"),$=u("BaseButton"),S=u("BaseModal");return b(),B(S,{show:w.value,onClose:d},{header:o(()=>[m("div",U,[C(v(e(i).title)+" ",1),n(f,{name:"XMarkIcon",class:"w-6 h-6 text-gray-500 cursor-pointer",onClick:d})])]),default:o(()=>[m("form",{action:"",onSubmit:T(I,["prevent"])},[m("div",J,[n(V,{layout:"one-column"},{default:o(()=>[n(_,{label:s.$t("expenses.category"),error:e(a).currentCategory.name.$error&&e(a).currentCategory.name.$errors[0].$message,required:""},{default:o(()=>[n(M,{modelValue:e(t).currentCategory.name,"onUpdate:modelValue":r[0]||(r[0]=l=>e(t).currentCategory.name=l),invalid:e(a).currentCategory.name.$error,type:"text",onInput:r[1]||(r[1]=l=>e(a).currentCategory.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),n(_,{label:s.$t("expenses.description"),error:e(a).currentCategory.description.$error&&e(a).currentCategory.description.$errors[0].$message},{default:o(()=>[n(x,{modelValue:e(t).currentCategory.description,"onUpdate:modelValue":r[2]||(r[2]=l=>e(t).currentCategory.description=l),rows:"4",cols:"50",onInput:r[3]||(r[3]=l=>e(a).currentCategory.description.$touch())},null,8,["modelValue"])]),_:1},8,["label","error"])]),_:1})]),m("div",K,[n($,{type:"button",variant:"primary-outline",class:"mr-3 text-sm",onClick:d},{default:o(()=>[C(v(s.$t("general.cancel")),1)]),_:1}),n($,{loading:e(c),disabled:e(c),variant:"primary",type:"submit"},{left:o(l=>[e(c)?E("",!0):(b(),B(f,{key:0,name:"ArrowDownOnSquareIcon",class:z(l.class)},null,8,["class"]))]),default:o(()=>[C(" "+v(e(t).isEdit?s.$t("general.update"):s.$t("general.save")),1)]),_:1},8,["loading","disabled"])])],32)]),_:1},8,["show"])}}};export{H as _};
